–í–æ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è **Cursor Frontend Rules ‚Äî Last Pixel**, —Å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º —ç—Ç–∞–ø–æ–≤:

1. **Red Light Green Light**
2. **Quiz**
3. **Demoday**

–¢–∞–∫–∂–µ —É—á—Ç–µ–Ω–æ, —á—Ç–æ **Demoday** –ø–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∞–∫—Ç–æ–≤–æ–≥–æ –∑–∞–ª–∞ –±–µ–∑ –≥–µ–π–º–ø–ª–µ—è.

---

# üïπ Cursor Frontend Rules ‚Äî "Last Pixel"

### –≠—Ç–∞–ø—ã: Red Light ‚Üí Quiz ‚Üí Demoday

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **React (Vite)** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
* **Zustand** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
* **react-konva** ‚Äî Canvas-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
* **axios** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å REST API
* **WebSocket** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
* **tailwind.css** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

---

## üß≠ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ api/                    # REST-–∑–∞–ø—Ä–æ—Å—ã (auth, shop, profile)
‚îÇ   ‚îú‚îÄ‚îÄ auth.js            # POST /api/auth/register/, POST /api/auth/login/
‚îÇ   ‚îú‚îÄ‚îÄ profile.js         # GET /api/profile/, PUT /api/profile/update/
‚îÇ   ‚îú‚îÄ‚îÄ games.js           # GET /api/games/available/, POST /api/games/{session_id}/join/
‚îÇ   ‚îú‚îÄ‚îÄ stats.js           # GET /api/stats/, GET /api/hall-of-fame/
‚îÇ   ‚îî‚îÄ‚îÄ shop.js            # GET /api/shop/items/, POST /api/shop/purchase/
‚îú‚îÄ‚îÄ assets/                 # –ò–∫–æ–Ω–∫–∏, –∑–≤—É–∫–∏, —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ components/             # –û–±—â–∏–µ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Chat.jsx           # –ß–∞—Ç –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ PlayerList.jsx     # –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Timer.jsx          # –¢–∞–π–º–µ—Ä –¥–ª—è —ç—Ç–∞–ø–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ PrizePool.jsx      # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤–æ–≥–æ —Ñ–æ–Ω–¥–∞
‚îú‚îÄ‚îÄ containers/             # –≠—Ç–∞–ø—ã –∏–≥—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ Lobby.jsx
‚îÇ   ‚îú‚îÄ‚îÄ RedLight.jsx
‚îÇ   ‚îú‚îÄ‚îÄ Quiz.jsx
‚îÇ   ‚îî‚îÄ‚îÄ Demoday.jsx        ‚úÖ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø
‚îú‚îÄ‚îÄ canvas/                 # Canvas-—Å—Ü–µ–Ω—ã (–∞–≤–∞—Ç–∞—Ä—ã, –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
‚îÇ   ‚îú‚îÄ‚îÄ GameCanvas.jsx     # –û—Å–Ω–æ–≤–Ω–æ–π canvas
‚îÇ   ‚îú‚îÄ‚îÄ PlayerAvatar.jsx   # –ê–≤–∞—Ç–∞—Ä—ã –∏–≥—Ä–æ–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ GameScene.jsx      # –°—Ü–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤
‚îú‚îÄ‚îÄ websocket/              # WebSocket –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ WebSocketClient.js # –û—Å–Ω–æ–≤–Ω–æ–π WebSocket –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ messageHandlers.js # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ store/                  # Zustand store
‚îÇ   ‚îú‚îÄ‚îÄ gameStore.js       # –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–≥—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ authStore.js       # –•—Ä–∞–Ω–∏–ª–∏—â–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ shopStore.js       # –•—Ä–∞–Ω–∏–ª–∏—â–µ –º–∞–≥–∞–∑–∏–Ω–∞
‚îú‚îÄ‚îÄ utils/                  # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ constants.js       # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (—ç—Ç–∞–ø—ã, —Ü–≤–µ—Ç–∞, –ø–∞—Ç—Ç–µ—Ä–Ω—ã)
‚îÇ   ‚îî‚îÄ‚îÄ helpers.js         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ App.jsx
‚îî‚îÄ‚îÄ main.jsx
```

---

## üéÆ –≠—Ç–∞–ø—ã –∏–≥—Ä—ã

### üé¨ Lobby

* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Å—Å–∏–∏ (REST API)
* WebSocket: `ready_check`, `game_state_update`
* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤ –∏ –∫–Ω–æ–ø–∫–∏ ¬´–ì–æ—Ç–æ–≤¬ª
* –ß–∞—Ç –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏

**REST API:**
```jsx
// –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∏–≥—Ä–µ
POST /api/games/{session_id}/join/
Response: { player_number: 42, session_id: "uuid" }

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–≥—Ä
GET /api/games/available/
Response: [{ session_id, status, max_players: 80, prize_pool: 8000000 }]
```

---

### üö¶ 1. Red Light Green Light

| –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                         | –ö–∞–∫                                  |
| ---------------------------------- | ------------------------------------ |
| –ü–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã —Å–≤–µ—Ç–∞             | WS: `red_light_signal`               |
| –î–≤–∏–≥–∞–µ—Ç –∏–≥—Ä–æ–∫–∞ –ø–æ –ø–æ–ª—é             | –ß–µ—Ä–µ–∑ Canvas (–∫–æ–Ω–≤–∞-—Å—Ü–µ–Ω–∞)           |
| –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã              | WS: `player_movement`                |
| –û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã—Ö                | WS: `player_movement` –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ ¬´–¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∞—Å–Ω–æ–º¬ª | –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä                  |

```jsx
// –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
sendWS("player_movement", { 
  x: 45.5, 
  y: 20.0, 
  timestamp: "2025-07-17T12:00:00Z" 
})

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ —Å–≤–µ—Ç–∞
// WS: red_light_signal { state: "red"|"green", duration: 5 }
```

---

### ‚ùì 2. Quiz

| –ß—Ç–æ –¥–µ–ª–∞–µ—Ç          | –ö–∞–∫                 |
| ------------------- | ------------------- |
| –ü–æ–ª—É—á–∞–µ—Ç –≤–æ–ø—Ä–æ—Å     | WS: `quiz_question` |
| –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã | UI + —Ç–∞–π–º–µ—Ä         |
| –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç    | WS: `quiz_answer`   |

```jsx
// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
// WS: quiz_question {
//   id: 456,
//   question: "What is the capital of Kazakhstan?",
//   options: { A: "Almaty", B: "Nur-Sultan", C: "Shymkent", D: "Aktobe" },
//   time_limit: 30
// }

// –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
sendWS("quiz_answer", {
  question_id: 123,
  answer: "A",
  time_taken: 14.5
})
```

---



### üèõ 3. Demoday (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø)

| –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                 | –ö–∞–∫                                            |
| -------------------------- | ---------------------------------------------- |
| –ü–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª –æ –ø–µ—Ä–µ—Ö–æ–¥–µ | WS: `stage_transition` —Å `"stage": "demoday"`  |
| –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ü–µ–Ω—É           | Canvas: –∏–≥—Ä–æ–∫–∏ –≤ –∞–∫—Ç–æ–≤–æ–º –∑–∞–ª–µ                  |
| –ü–æ–∫–∞ –±–µ–∑ –≥–µ–π–º–ø–ª–µ—è          | –¢–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –∏ —Å–ø–∏—Å–æ–∫ –∂–∏–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ |

```jsx
// Demoday.jsx
const alivePlayers = game.players.filter(p => p.is_alive)
```

---

## üì° WebSocket: –°–æ–±—ã—Ç–∏—è

### –ö–ª–∏–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä

* `ready_check` - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–≥—Ä–µ
* `chat_message` - —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ
* `quiz_answer` - –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
* `player_movement` - –¥–≤–∏–∂–µ–Ω–∏–µ –≤ Red Light


### –°–µ—Ä–≤–µ—Ä ‚Üí –ö–ª–∏–µ–Ω—Ç

* `game_state_update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
* `stage_transition` - –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏
* `quiz_question` - –≤–æ–ø—Ä–æ—Å—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
* `red_light_signal` - —Å–∏–≥–Ω–∞–ª—ã —Å–≤–µ—Ç–∞

* `player_eliminated` - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
* `game_finished` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
* `chat_message` - —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
* `player_movement` - –¥–≤–∏–∂–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤

---

## üß† Zustand Store (store/gameStore.js)

```ts
{
  game: {
    stage: 'lobby' | 'red_light' | 'quiz' | 'demoday',
    session_id: string,
    status: string,
    current_stage: number,
    prize_pool: number,

    players: [{
      player_number: number,
      nickname: string,
      avatar_color: string,
      avatar_pattern: string,
      is_alive: boolean,
      position_x: number,
      position_y: number
    }],
    timestamp: string
  },
  user: { 
    token: string,
    user_id: number,
    nickname: string,
    balance: number,
    avatar_color: string,
    avatar_pattern: string
  },
  quiz: { 
    id: number,
    question: string,
    options: object,
    time_limit: number
  },

  websocket: WebSocket | null,
  actions: {
    setStage, updatePlayers, sendWS, eliminatePlayer, 
    updatePrizePool, setQuizQuestion
  }
}
```

---

## üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏–≥—Ä—ã (–≤ —Ç–µ–Ω–≥–µ)

* **–°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å**: 200,000 ‚Ç∏ (–ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
* **Prize Pool**: 8,000,000 - 16,000,000 ‚Ç∏ (–ø—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥)
* **Balance**: –±–∞–ª–∞–Ω—Å –∏–≥—Ä–æ–∫–∞ –≤ —Ç–µ–Ω–≥–µ
* **Shop Items**: —Ü–≤–µ—Ç–∞ (10,000-25,000 ‚Ç∏), –ø–∞—Ç—Ç–µ—Ä–Ω—ã (0-15,000 ‚Ç∏)

---

## üè™ –ú–∞–≥–∞–∑–∏–Ω (Shop)

```jsx
// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
GET /api/shop/items/
Response: {
  colors: [{ value: "#FF6B6B", name: "Red", cost: 10000 }],
  patterns: [{ value: "solid", name: "Solid", cost: 0 }]
}

// –ü–æ–∫—É–ø–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
POST /api/shop/purchase/
Body: { item_type: "color", item_value: "#FFD700", cost: 25000 }
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```jsx
// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞
GET /api/stats/
Response: {
  total_games: 15,
  total_wins: 3,
  win_rate: 20.0,
  total_earnings: 2000000,
  current_balance: 1500000
}

// –ó–∞–ª —Å–ª–∞–≤—ã
GET /api/hall-of-fame/
Response: [{ rank: 1, nickname: "TopPlayer", total_earnings: 50000000 }]
```

---

## üèÅ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã

* `player_eliminated`: –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏
* `game_finished`: —ç–∫—Ä–∞–Ω –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π (nickname + —Å—É–º–º–∞)

```jsx
// WS: game_finished {
//   winners: [{ player_number: 1, nickname: "Winner1", prize: 5333333.33 }],
//   total_prize_pool: 16000000
// }
```

---

## ‚úÖ –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. [x] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è / –ª–æ–≥–∏–Ω
2. [x] Lobby
3. [x] Red Light
4. [x] Quiz
5. [ ] Demoday (—Å—Ü–µ–Ω–∞)
6. [ ] –ú–∏–Ω–∏-–∏–≥—Ä–∞ –≤ Demoday (–¥–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ)
7. [ ] –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã
8. [ ] –ú–∞–≥–∞–∑–∏–Ω –∞–≤–∞—Ç–∞—Ä–æ–≤
9. [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∑–∞–ª —Å–ª–∞–≤—ã

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Chat.jsx
```jsx
// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
sendWS("chat_message", { message: "Hello everyone!" })

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
// WS: chat_message { id: 123, player_number: 1, nickname: "Player1", message: "Hello!", timestamp: "..." }
```

### Timer.jsx
```jsx
// –¢–∞–π–º–µ—Ä –¥–ª—è —ç—Ç–∞–ø–æ–≤
const Timer = ({ timeLimit, onTimeUp }) => {
  // –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç –¥–ª—è quiz, red_light
}
```

### PrizePool.jsx
```jsx
// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤–æ–≥–æ —Ñ–æ–Ω–¥–∞
const PrizePool = ({ amount }) => {
  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª –≤ —Ç–µ–Ω–≥–µ
}
```


